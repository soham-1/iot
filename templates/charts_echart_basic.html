<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
    <title>Basic eCharts | Equation - Multipurpose Bootstrap Dashboard Template </title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='default/ltr/assets/img/favicon.ico') }}"/>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700" rel="stylesheet">
    <link href="{{ url_for('static', filename='default/ltr/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ url_for('static', filename='default/ltr/assets/css/plugins.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ url_for('static', filename='speedometer.css') }}" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <link href="{{ url_for('static', filename='default/ltr/assets/css/components/custom-counter.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ url_for('static', filename='ctimer.css') }}" rel="stylesheet" type="text/css">
    
</head>
<body>
    {{g.s}}
    <!-- Tab Mobile View Header -->
    <!-- Tab Mobile View Header -->
        <!--  BEGIN CONTENT PART  -->
        <div id="content" class="main-content">
            <div class="container">                
                <div class="row layout-spacing">
                    <div class="col-lg-12">
                        <div class="statbox widget box box-shadow">
                            <div class="widget-header">                                
                                <div class="row">
                                    <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                        <h4>Basic Column Chart</h4>
                                    </div>
                                </div>
                            </div>

                            <div class="widget-content widget-content-area">
                                <div class="row">
                                    <div class="col-lg-12 mb-4">
                                        <div id="basic_chart" class="" style="height:400px"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="widget-content widget-content-area text-center circle-counter-container">
                                <div class="row mb-5">
                                    <div id="ctimer"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
            <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
            <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
            <div id="chartdiv"></div>
        <!--  END CONTENT PART  -->
    </div>

    <!-- BEGIN GLOBAL MANDATORY SCRIPTS -->
    <script src="{{ url_for('static', filename='default/ltr/assets/js/libs/jquery-3.1.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='default/ltr/bootstrap/js/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='default/ltr/bootstrap/js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='default/ltr/plugins/scrollbar/jquery.mCustomScrollbar.concat.min.js') }}"></script>
    <script src="{{ url_for('static', filename='default/ltr/plugins/blockui/jquery.blockUI.min.js') }}"></script>
    <script src="{{ url_for('static', filename='default/ltr/assets/js/app.js') }}"></script>
    
    <script>
        /**
 * ---------------------------------------
 * This demo was created using amCharts 4.
 * 
 * For more information visit:
 * https://www.amcharts.com/
 * 
 * Documentation is available at:
 * https://www.amcharts.com/docs/v4/
 * ---------------------------------------
 */

// Themes begin
am4core.useTheme(am4themes_animated);
// Themes end



// create chart
var chart = am4core.create("chartdiv", am4charts.GaugeChart);
chart.innerRadius = -15;

var axis = chart.xAxes.push(new am4charts.ValueAxis());
axis.min = 0;
axis.max = 100;
axis.strictMinMax = true;

var colorSet = new am4core.ColorSet();

var gradient = new am4core.LinearGradient();
gradient.stops.push({color:am4core.color("red")})
gradient.stops.push({color:am4core.color("yellow")})
gradient.stops.push({color:am4core.color("green")})

axis.renderer.line.stroke = gradient;
axis.renderer.line.strokeWidth = 15;
axis.renderer.line.strokeOpacity = 1;

axis.renderer.grid.template.disabled = true;

var hand = chart.hands.push(new am4charts.ClockHand());
hand.radius = am4core.percent(97);

var xhr = new XMLHttpRequest();
    xhr.open('GET', '{{ url_for('stream') }}');
    xhr.send();
    setInterval(function() {
        var tp = xhr
        console.log(xhr.responseText);
    }, 1000);

setInterval(function() {
    hand.showValue(0.04 * 100, 1000, am4core.ease.cubicOut);
}, 2000);
</script>



<script>
    function makeTimer() {

//		var endTime = new Date("29 April 2018 9:56:00 GMT+01:00");	
    var endTime = new Date("29 April 2020 9:56:00 GMT+01:00");			
        endTime = (Date.parse(endTime) / 1000);

        var now = new Date();
        now = (Date.parse(now) / 1000);

        var timeLeft = endTime - now;

        var days = Math.floor(timeLeft / 86400); 
        var hours = Math.floor((timeLeft - (days * 86400)) / 3600);
        var minutes = Math.floor((timeLeft - (days * 86400) - (hours * 3600 )) / 60);
        var seconds = Math.floor((timeLeft - (days * 86400) - (hours * 3600) - (minutes * 60)));

        if (hours < "10") { hours = "0" + hours; }
        if (minutes < "10") { minutes = "0" + minutes; }
        if (seconds < "10") { seconds = "0" + seconds; }

        $("#days").html(days + "<span>Days</span>");
        $("#hours").html(hours + "<span>Hours</span>");
        $("#minutes").html(minutes + "<span>Minutes</span>");
        $("#seconds").html(seconds + "<span>Seconds</span>");		

}

setInterval(function() { makeTimer(); }, 1000);
</script>

<script src="{{ url_for('static', filename='default/ltr/plugins/counter/jquery.countTo.js') }}"></script>
    <script src="{{ url_for('static', filename='ctimer.js') }}"></script>


    <script>
        $(document).ready(function() {
            App.init();
        });
    </script>
    <script src="{{ url_for('static', filename='default/ltr/assets/js/custom.js') }}"></script>
    <!-- END GLOBAL MANDATORY SCRIPTS -->

    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    <script src="{{ url_for('static', filename='default/ltr/plugins/charts/echarts/basic-charts/echarts_basic.js') }}"></script>
    <script src="{{ url_for('static', filename='default/ltr/plugins/charts/echarts/echarts.js') }}"></script>
    <script src="{{ url_for('static', filename='default/ltr/plugins/charts/echarts/basic-charts/timelineOption.js') }}"></script>
    <!-- END PAGE LEVEL SCRIPTS -->

    <!--  BEGIN CUSTOM STYLE FILE  -->
    <script src="{{ url_for('static', filename='default/ltr/plugins/charts/echarts/basic-charts/echarts_basic_script.js') }}"></script>
    <script>
        // Initialize after dom ready
        var chartBasic = echarts.init(document.getElementById('basic_chart')); 

option = {
            tooltip : {
                trigger: 'axis'
            },
            color : [ "#6156ce", "#ee3d50"],
            legend: {
                data:['Walking','Running']
            },
            calculable : true,
            xAxis : [
                {
                    type : 'category',
                    data : ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug']
                }
            ],
            yAxis : [
                {
                    type : 'value'
                }
            ],
            series : [
                {
                    name:'Walking',
                    type:'bar',
                    // data:[2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3],
                    data:{{context['data']|tojson}},
                    markPoint : {
                        data : [
                            {type : 'max', name: 'The maximum value'},
                            {type : 'min', name: 'Minimum value'}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name: 'average value'}
                        ]
                    }
                },
                {
                    name:'Running',
                    type:'bar',
                    data:[2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3],
                    markPoint : {
                        data : [
                            {name : 'The highest year', value : 182.2, xAxis: 7, yAxis: 183, symbolSize:18},
                            {name : 'Year minimum', value : 2.3, xAxis: 11, yAxis: 3}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name : 'average value'}
                        ]
                    }
                }
            ]
        };

// Load data into the ECharts instance 
chartBasic.setOption(option); 

    $(window).on('resize', function(){
    if(chartBasic != null && chartBasic != undefined){
        chartBasic.resize();
    }
});
    </script>
    <!--  END CUSTOM STYLE FILE  -->

    
</body>
</html>